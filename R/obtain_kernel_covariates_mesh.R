# 1. After getting the covariates' data for the mesh locations and days for predictions, apply the 'apply.kernel' to obtain the kernel covariates
#    Note: The date should be repeated for each year
# For instance:
#    lon      lat        date  X1.date  X1.previous.date  ...  X2.date  X2.previous.date  ...  X2.date  X2.previous.date  ...
# 406.78  4300.87  2017-05-15    13.76             11.98  ...     1.01              1.21  ...     0.00              0.00  ...
# 412.45  4210.75  2017-05-15    12.41             12.54  ...     1.32              1.67  ...     0.01              0.03  ...
# 409.63  4249.98  2017-05-15    11.01             13.11  ...     0.87              0.60  ...     0.12              0.09  ...
# ...         ...         ...      ...               ...  ...      ...               ...  ...      ...               ...  ...
# 406.78  4300.87  2022-05-10    12.76             12.98  ...     2.15              1.99  ...     0.65              0.54  ...
# 412.45  4210.75  2022-05-10    14.41             13.11  ...     3.01              2.34  ...     1.17              1.12  ...
# 409.63  4249.98  2022-05-10    12.01             11.22  ...     1.55              0.98  ...     0.09              0.00  ...


cov.kernel.df1=apply.kernel(data.mesh,"X1_before_",7)
cov.kernel.df2=apply.kernel(data.mesh,"X2_before_",7)
cov.kernel.df3=apply.kernel(data.mesh,"X3_before_",7)

# 3. Attach the kernel covariates to the original dataset
data.mesh=cbind(data.mesh,cov.kernel.df1)
data.mesh=cbind(data.mesh,cov.kernel.df2)
data.mesh=cbind(data.mesh,cov.kernel.df3)
